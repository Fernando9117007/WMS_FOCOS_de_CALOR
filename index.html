<!DOCTYPE html>
<html>
<head>
  <title>Mapa oscuro con GEE y Leaflet</title>
  <!-- Cargar Leaflet (CSS y JS) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <!-- Cargar la API de GEE -->
  <script src="https://code.earthengine.google.com/"></script>
  <style>
    #map { height: 100vh; width: 100%; } /* Tamaño del mapa */
  </style>
</head>
<body>
  <!-- Contenedor del mapa -->
  <div id="map"></div>

  <script>
    // Inicializar el mapa de Leaflet con un fondo oscuro
    var map = L.map('map').setView([0, 0], 2); // Centro y zoom inicial

    // Añadir mapa base oscuro (CartoDB Dark Matter)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
      attribution: '© CartoDB'
    }).addTo(map);

    // Autenticación con GEE
    ee.initialize();

    // Cargar un dataset de GEE (ej: NDVI)
    var dataset = ee.Image('MODIS/006/MOD13A2/20220101').select('NDVI');
    var visParams = { min: 0, max: 9000, palette: ['FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718'] };

    // Añadir la imagen de GEE al mapa (usando el plugin "leaflet-ee")
    var overlay = L.eeLayer(dataset, visParams).addTo(map);
  </script>
  
  <!-- Cargar el plugin "leaflet-ee" para conectar Leaflet y GEE -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet-ee@latest/dist/leaflet-ee.min.js"></script>
</body>
</html>
